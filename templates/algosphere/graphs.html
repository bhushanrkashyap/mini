{% extends 'algosphere/base.html' %}
{% load static %}
{% block title %}Graphs Visualizer{% endblock %}
{% block content %}
  <div class="mb-6">
    <h1>Graph Visualizer</h1>
    <p class="text-gray-600 text-lg">Explore graph data structures and traversal algorithms</p>
  </div>

  <div class="algo-info mb-6">
    <p class="font-semibold text-gray-700 mb-1">ðŸ”— Graph Algorithms</p>
    <p class="text-gray-600"><strong>BFS (Breadth-First Search):</strong> Explores level by level using a queue â€¢ <strong>DFS (Depth-First Search):</strong> Explores as deep as possible using a stack/recursion</p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Controls -->
    <div class="card lg:col-span-1">
      <h3 class="font-bold text-lg text-gray-800 mb-4">Controls</h3>
      
      <div class="space-y-4">
        <!-- Add Nodes -->
        <div>
          <label class="text-sm mb-2 block font-semibold">Add Nodes</label>
          <div class="flex gap-2">
            <input id="node-input" class="form-input flex-1" placeholder="e.g., 1,2,3,4,5" type="text">
            <button id="add-nodes-btn" class="btn-primary px-4">
              <svg class="w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
            </button>
          </div>
          <p class="text-xs text-gray-500 mt-1">Enter comma-separated numbers</p>
        </div>

        <!-- Add Edge -->
        <div>
          <label class="text-sm mb-2 block font-semibold">Add Edge</label>
          <div class="flex gap-2">
            <input id="edge-from" class="form-input flex-1" placeholder="From" type="number">
            <input id="edge-to" class="form-input flex-1" placeholder="To" type="number">
            <button id="add-edge-btn" class="btn-secondary px-3">
              <svg class="w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
            </button>
          </div>
        </div>

        <!-- Quick Fill -->
        <div>
          <label class="text-sm mb-2 block">Quick Actions</label>
          <div class="flex gap-2">
            <button id="sample-graph" class="btn-secondary flex-1 text-sm">Sample</button>
            <button id="clear-graph" class="btn-secondary flex-1 text-sm">Clear</button>
          </div>
        </div>

        <!-- Start Node for Traversal -->
        <div class="pt-3 border-t border-gray-200">
          <label class="text-sm mb-2 block font-semibold">Start Node</label>
          <input id="start-node" class="form-input w-full" placeholder="Enter start node" type="number" value="1">
        </div>

        <!-- Traversal Buttons -->
        <div>
          <label class="text-sm mb-3 block font-semibold">Traversal Algorithms</label>
          <div class="space-y-2">
            <button id="bfs-btn" class="btn-primary w-full">
              <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
              BFS (Breadth-First)
            </button>
            <button id="dfs-btn" class="btn-primary w-full">
              <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
              DFS (Depth-First)
            </button>
          </div>
        </div>

        <!-- Traversal Speed -->
        <div>
          <label class="text-sm mb-2 block">Animation Speed</label>
          <input id="speed-slider" type="range" min="100" max="2000" value="800" step="100" class="w-full">
          <div class="flex justify-between text-xs text-gray-500">
            <span>Fast</span>
            <span id="speed-display">800ms</span>
            <span>Slow</span>
          </div>
        </div>

        <!-- Traversal Result -->
        <div class="pt-3 border-t border-gray-200">
          <label class="text-sm mb-2 block font-semibold">Traversal Order</label>
          <div id="traversal-order" class="p-3 bg-indigo-50 rounded-lg text-center text-indigo-700 font-mono text-sm min-h-[40px] flex items-center justify-center">
            Ready to traverse
          </div>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-2 gap-2">
          <div class="stat-badge justify-center">
            Nodes: <span id="node-count">0</span>
          </div>
          <div class="stat-badge justify-center">
            Edges: <span id="edge-count">0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Visualization -->
    <div class="card lg:col-span-2">
      <h3 class="font-bold text-lg text-gray-800 mb-4">Graph Visualization</h3>
      <svg id="graph-svg" class="svg-wrap" style="height:600px; width:100%;"></svg>
    </div>
  </div>

  <script src="{% static 'js/graphs.js' %}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{ 
      window.AlgoSphereGraphs?.init('#graph-svg'); 
    });
  </script>
{% endblock %}
